{% extends 'base.html' %} {% block body %}
<style>
  .pw {
    -webkit-text-security: disc;
  }
</style>

<h3>
  <small style="padding-left: 25px" class="navbar navbar-light bg-light text-muted">Role Master</small>
</h3>


<!-- Button trigger modal -->
<button type="button" class="btn btn-outline-dark ms-4" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Add New User
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Add New User</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action={% url 'add_user' %} method='POST' autocomplete="off">
          {% csrf_token %}
          <div class="form-group">
            <label class="form-label" for="username">Username</label>
            <input required type="text" class="form-control" name="username" placeholder="Enter Username" />
          </div>
          <div class="form-group">
            <label class="form-label" for="password">Password</label>
            <input required type="password" class="form-control" name="password" placeholder="Password" />
          </div>
          <div class="form-group mb-4">
            <label class="form-label" for="cname">Country</label>
            <select required name="country" class="form-control mb-3" id="cname">
              <option selected disabled="true">Choose Country</option>
              {% for datadisplay in country %}
              <option>{{datadisplay}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="d-flex justify-content-center">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary ms-4">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<h3>
  <small style="padding-left: 25px" class="navbar navbar-light bg-light text-muted mt-2">Existing Users</small>
</h3>
<table style="width:80%;margin: auto;" class="table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Username</th>
      <th scope="col">Password</th>
      <th scope="col">Role</th>
      <th scope="col">Country</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr data-url="/rolemaster">
      <th scope="row">{{forloop.counter}}</th>
      <td>{{user.Username}}</td>
      <td>
        <div class="pw">{{user.Password}}</div>
      </td>
      <td>Admin</td>
      <td>{{user.CountryCode}}</td>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<script>

  $(document).ready(function () {
    $("#cname").select2({
      dropdownParent: $("#exampleModal")
    });
  });

</script>
{% endblock body %}